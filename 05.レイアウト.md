# CSS の書き方は同じですが

StyleSheet を使って CSS でレイアウトを記述するのは React と変わりはありません。

レイアウトの基礎は フレックスボックス（flex） です。

ですが、Web（HTML） の flex と違うところがあります。

<br>

# flex

Web では flex を指定する時は display: flex とします。

ReactNative では flex は flex: <数値> で記述します。

## flex: 1 とはなにか

ReactNative では必ず 1 番親のコンポーネントで flex: 1 がかけられます。

こうすることで、画面の幅と高さ目一杯に要素が引き伸ばされます。

ここで重要なのは１番親のコンポーネントでかけられた時だけこうなります。

子コンポーネントで同じように flex: 1 を使うと別の意味合いになるので注意してください。

フレックスボックスの仕様通りではあるのですが、説明もされず当たり前のように書かれているので初見だと混乱します。

試してみましょう。

```tsx
export default function App() {
  return (
    <View style={{ flex: 1 }}>
      <View style={{ flex: 1, backgroundColor: 'red' }}></View>
      <View style={{ flex: 1, backgroundColor: 'yellow' }}></View>
      <View style={{ flex: 1, backgroundColor: 'blue' }}></View>
    </View>
  );
}
```

先ほど画面目一杯に引き伸ばすと説明した flex: 1 ですが、子コンポーネントでは均等に引き伸ばされています。

子コンポーネントでの flex: 1 は親要素の幅と高さを基準に、同階層の他の要素の幅や高さを考慮して引き伸ばせるだけ引き伸ばします。

この例では親で幅と高さが 100%確保された上で、同階層に flex: 1 がかけられた要素が 3 つ並んでおり、それぞれが目一杯引き伸ばそうとします。

しかし、要素が ３つあるのでそれぞれを 1/3 ずつ均等に割った幅と高さが確保されて配置がされます。

引き伸ばされるという点は同じですが、同階層の要素が確保できる幅と高さが考慮された上での結果となります。

逆に、１番親のコンポーネントで flex: 1 を使うと画面目一杯に引き伸ばされる理由は、他に同階層にいるコンポーネントがいないためということになります。

また １番親で flex: 1 をかけないと、高さと幅が確保されないので何も表示されなくなります。

本当は親と子の flex: 1 の意味合いは同じなのですが、React コンポーネント は必ず 1 つのコンポーネントだけを返すという仕様があります。

そのため、ReactNative では １番親の flex: 1 と子の flex: 1 では明確に振舞いが区別されます。

## 親の flex: 1 は必ずかける

これで flex: 1 が何してるかは分かったとは思います。

カラクリさえわかれば、別にかけなくてもいいんじゃないかと思いますが、必ずかけてください。

高さと幅それぞれを画面目一杯に引き延ばした上でレイアウトを考え、スタイリングをかけるのが ReactNative でのお作法となります。

Web の React では領域を確保していくイメージですが、ReactNative では 100%確保した領域の中で分配をしていくイメージに近いです。

<br>

# どのようにレイアウトを考えるのか

大体この流れでスタイリングを行っていけば良いと思います。

1. 親の View コンポーネントの flex: 1 をかける
2. 子の View コンポーネントでレイアウトを決める
3. 孫コンポーネントに幅と高さを持つコンポーネントを指定する

実際には孫コンポーネントは大きかったりするので、孫コンポーネントの中にレイアウトが必要なケースもあります。

その場合も同様にレイアウトを決めてから幅と高さを持つコンポーネントを指定する流れでうまくいきます。
